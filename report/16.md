# 数据库第16周作业
`19336035` `陈梓乐`

1. **求各表空间的容量（注意一个表空间对应多个数据文件的情况），剩余空间和使用率，要求一条 SQL 语句完成**
```sql
select  tablespace_name, 
        to_char(sum(bytes)/1024/1024, '999999.99')||'MB' space
from    dba_data_files
group by tablespace_name;
```
![](../img/85.png)

2. **查出 emp 表中每一行的 rowid，并查出它们分别在哪个数据文件，第几个 block，第几个slot（row number），属于哪个对象？提示：利用 dbms_rowid 包，用法可以参考课程资源中的 DSI401 第 4 章有关内容，或《PL/SQL packages》**

```sql
with tmp as
(
    select  rowid,
            ename,
            dbms_rowid.rowid_relative_fno(rowid) relative_fno,
            dbms_rowid.rowid_block_number(rowid) block_number,
            dbms_rowid.rowid_row_number(rowid) row_number
    from    scott.emp
)
select          ename,
                substr(file_name, 1, 50),
                block_number,
                row_number
from            tmp
natural join    dba_data_files;
```

![](../img/86.png)

3. **分别创建本地管理和字典管理的表空间（给它适当的缺省 storage 参数），分别在上面建表，并且指出这些表的 storage 参数。通过 minextents 参数或 insert 行使这些表大小增长到一定规模。再通过观察 dba_extents 数据字典视图看下实际分配的 extent 情况，与你设计的storage 参数是否相符？**
